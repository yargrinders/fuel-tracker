# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Drive API - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üéØ –ß—Ç–æ –ø–æ–ª—É—á–∏–º:
```
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø –≤ Google Drive –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
‚úÖ –ö–æ–º–∞–Ω–¥–∞ /backup - —Ä—É—á–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
‚úÖ –ö–æ–º–∞–Ω–¥–∞ /restore - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ credentials –≤ Render
‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–∞ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
```

---

## üìã –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Google Cloud –ø—Ä–æ–µ–∫—Ç–∞ (5 –º–∏–Ω—É—Ç)

### 1.1 –û—Ç–∫—Ä–æ–π Google Cloud Console

1. –ü–µ—Ä–µ–π–¥–∏: https://console.cloud.google.com
2. –í–æ–π–¥–∏ –≤ —Å–≤–æ–π Google –∞–∫–∫–∞—É–Ω—Ç
3. **–°–æ–≥–ª–∞—Å–∏—Å—å** —Å Terms of Service –µ—Å–ª–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç

### 1.2 –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç

1. –í–≤–µ—Ä—Ö—É —Å–ª–µ–≤–∞ –Ω–∞–∂–º–∏ –Ω–∞ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
2. **New Project** (–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç)
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   ```
   Project name: fuel-tracker-backup
   Location: No organization
   ```
4. **Create** (–°–æ–∑–¥–∞—Ç—å)
5. –ü–æ–¥–æ–∂–¥–∏ 10 —Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞ –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞—Å—Ç—Å—è

---

## üîë –®–∞–≥ 2: –í–∫–ª—é—á–µ–Ω–∏–µ Google Drive API (2 –º–∏–Ω—É—Ç—ã)

### 2.1 –û—Ç–∫—Ä–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫—É API

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞: **APIs & Services** ‚Üí **Library**
   (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–∏—Å–∫ –ø–æ "Library")

### 2.2 –ù–∞–π–¥–∏ –∏ –≤–∫–ª—é—á–∏ Google Drive API

1. –í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏: `Google Drive API`
2. –í—ã–±–µ—Ä–∏ **Google Drive API** (–æ—Ç Google)
3. –ù–∞–∂–º–∏ **Enable** (–í–∫–ª—é—á–∏—Ç—å)
4. –ü–æ–¥–æ–∂–¥–∏ –ø–æ–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è

---

## üë§ –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ Service Account (3 –º–∏–Ω—É—Ç—ã)

Service Account - —ç—Ç–æ "—Ä–æ–±–æ—Ç-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å Google Drive –æ—Ç –∏–º–µ–Ω–∏ —Ç–≤–æ–µ–≥–æ –±–æ—Ç–∞.

### 3.1 –û—Ç–∫—Ä–æ–π Service Accounts

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞: **APIs & Services** ‚Üí **Credentials**
2. –í–≤–µ—Ä—Ö—É –Ω–∞–∂–º–∏ **+ Create Credentials**
3. –í—ã–±–µ—Ä–∏ **Service Account**

### 3.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Service Account

**–®–∞–≥ 1 –∏–∑ 3: Service account details**
```
Service account name: fuel-tracker-bot
Service account ID: fuel-tracker-bot (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
Description: Backup bot for fuel price tracker
```
–ù–∞–∂–º–∏ **Create and Continue**

**–®–∞–≥ 2 –∏–∑ 3: Grant this service account access to project**
```
Role: Basic ‚Üí Owner
```
(–∏–ª–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ä–æ–ª—å –ø–æ–ø—Ä–æ—â–µ: "Editor")
–ù–∞–∂–º–∏ **Continue**

**–®–∞–≥ 3 –∏–∑ 3: Grant users access to this service account**
–ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏ **Done** (–Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–π)

### 3.3 –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ (JSON)

‚ö†Ô∏è **–û–ß–ï–ù–¨ –í–ê–ñ–ù–´–ô –®–ê–ì!**

1. –í —Å–ø–∏—Å–∫–µ Service Accounts –Ω–∞–π–¥–∏ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–π `fuel-tracker-bot`
2. –ù–∞–∂–º–∏ –Ω–∞ –Ω–µ–≥–æ (–Ω–∞ email –∞–¥—Ä–µ—Å)
3. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Keys** (–ö–ª—é—á–∏)
4. **Add Key** ‚Üí **Create new key**
5. –í—ã–±–µ—Ä–∏ —Ñ–æ—Ä–º–∞—Ç: **JSON**
6. **Create**

üì• **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç—Å—è —Ñ–∞–π–ª** —Ç–∏–ø–∞:
```
fuel-tracker-backup-a1b2c3d4e5f6.json
```

‚ö†Ô∏è **–°–û–•–†–ê–ù–ò –≠–¢–û–¢ –§–ê–ô–õ!** –û–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:**
```json
{
  "type": "service_account",
  "project_id": "fuel-tracker-backup",
  "private_key_id": "abc123...",
  "private_key": "-----BEGIN PRIVATE KEY-----\nMIIE...\n-----END PRIVATE KEY-----\n",
  "client_email": "fuel-tracker-bot@fuel-tracker-backup.iam.gserviceaccount.com",
  "client_id": "123456789...",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  ...
}
```

---

## üìÅ –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –≤ Google Drive (1 –º–∏–Ω—É—Ç–∞)

### 4.1 –û—Ç–∫—Ä–æ–π —Å–≤–æ–π Google Drive

1. –ü–µ—Ä–µ–π–¥–∏: https://drive.google.com
2. –í–æ–π–¥–∏ –≤ **—Ç–æ—Ç –∂–µ Google –∞–∫–∫–∞—É–Ω—Ç**

### 4.2 –°–æ–∑–¥–∞–π –ø–∞–ø–∫—É –¥–ª—è –±—ç–∫–∞–ø–æ–≤

1. **New** (–°–æ–∑–¥–∞—Ç—å) ‚Üí **Folder** (–ü–∞–ø–∫–∞)
2. –ò–º—è: `fuel-tracker-backups`
3. **Create**

### 4.3 –î–∞–π –¥–æ—Å—Ç—É–ø Service Account

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!**

1. –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ –Ω–∞ –ø–∞–ø–∫–µ `fuel-tracker-backups`
2. **Share** (–ü–æ–¥–µ–ª–∏—Ç—å—Å—è)
3. –í –ø–æ–ª–µ "Add people and groups" –≤—Å—Ç–∞–≤—å email Service Account:
   ```
   fuel-tracker-bot@fuel-tracker-backup.iam.gserviceaccount.com
   ```
   (—ç—Ç–æ—Ç email –±—ã–ª –≤ JSON —Ñ–∞–π–ª–µ –∏–∑ —à–∞–≥–∞ 3.3)
4. –ü—Ä–∞–≤–∞: **Editor** (–†–µ–¥–∞–∫—Ç–æ—Ä)
5. –°–Ω–∏–º–∏ –≥–∞–ª–∫—É "Notify people" (–Ω–µ —É–≤–µ–¥–æ–º–ª—è—Ç—å)
6. **Share** / **Send**

### 4.4 –°–∫–æ–ø–∏—Ä—É–π ID –ø–∞–ø–∫–∏

1. –û—Ç–∫—Ä–æ–π –ø–∞–ø–∫—É `fuel-tracker-backups`
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://drive.google.com/drive/folders/1A2B3C4D5E6F7G8H9I0J
                                          ^^^^^^^^^^^^^^^^^^^^
                                          —ç—Ç–æ FOLDER_ID
   ```
3. –°–∫–æ–ø–∏—Ä—É–π ID –ø–∞–ø–∫–∏ (—á–∞—Å—Ç—å –ø–æ—Å–ª–µ `/folders/`)
4. –°–æ—Ö—Ä–∞–Ω–∏ –≥–¥–µ-–Ω–∏–±—É–¥—å, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è Render

---

## üîê –®–∞–≥ 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ credentials –≤ Render (5 –º–∏–Ω—É—Ç)

### 5.1 –û—Ç–∫—Ä–æ–π Render Dashboard

1. https://dashboard.render.com
2. –í—ã–±–µ—Ä–∏ —Å–≤–æ–π —Å–µ—Ä–≤–∏—Å `fuel-price-tracker`

### 5.2 –î–æ–±–∞–≤—å Environment Variables

–ù–∞–∂–º–∏ **Environment** —Å–ª–µ–≤–∞, –∑–∞—Ç–µ–º **Add Environment Variable**

**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 1: GOOGLE_DRIVE_FOLDER_ID**
```
Key: GOOGLE_DRIVE_FOLDER_ID
Value: 1A2B3C4D5E6F7G8H9I0J
(—Ç–≤–æ–π ID –ø–∞–ø–∫–∏ –∏–∑ —à–∞–≥–∞ 4.4)
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 2: GOOGLE_CREDENTIALS (—Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è!)**

‚ö†Ô∏è **–°–ø–æ—Å–æ–± –ê: –ß–µ—Ä–µ–∑ Secret Files (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

1. –û—Ç–∫—Ä–æ–π JSON —Ñ–∞–π–ª –∏–∑ —à–∞–≥–∞ 3.3 –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. –°–∫–æ–ø–∏—Ä—É–π **–í–ï–°–¨** JSON (–æ—Ç { –¥–æ })
3. –í Render:
   ```
   Key: GOOGLE_CREDENTIALS
   Value: [–≤—Å—Ç–∞–≤—å –≤–µ—Å—å JSON –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –∏–ª–∏ –∫–∞–∫ –µ—Å—Ç—å]
   ```

üí° **–°–ø–æ—Å–æ–± –ë: –ß–µ—Ä–µ–∑ base64 (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)**

–ï—Å–ª–∏ Render —Ä—É–≥–∞–µ—Ç—Å—è –Ω–∞ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π JSON:

```bash
# –ù–∞ Mac/Linux:
cat fuel-tracker-backup-*.json | base64

# –ù–∞ Windows (PowerShell):
[Convert]::ToBase64String([IO.File]::ReadAllBytes("fuel-tracker-backup-*.json"))
```

–ü–æ–ª—É—á–∏—à—å –¥–ª–∏–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É —Ç–∏–ø–∞:
```
eyJ0eXBlIjoic2VydmljZV9hY2NvdW50IiwicHJvamVjdF9pZCI6ImZ1ZWwtdHJhY2tlci1iYWNrdXAiLC...
```

–í Render:
```
Key: GOOGLE_CREDENTIALS_BASE64
Value: [–≤—Å—Ç–∞–≤—å base64 —Å—Ç—Ä–æ–∫—É]
```

### 5.3 –°–æ—Ö—Ä–∞–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. **Save Changes** –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
2. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

–ü–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º —É–±–µ–¥–∏—Å—å:

- [ ] Google Cloud –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω ‚úÖ
- [ ] Google Drive API –≤–∫–ª—é—á—ë–Ω ‚úÖ
- [ ] Service Account —Å–æ–∑–¥–∞–Ω ‚úÖ
- [ ] JSON –∫–ª—é—á —Å–∫–∞—á–∞–Ω ‚úÖ
- [ ] –ü–∞–ø–∫–∞ –≤ Google Drive —Å–æ–∑–¥–∞–Ω–∞ ‚úÖ
- [ ] Service Account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ ‚úÖ
- [ ] GOOGLE_DRIVE_FOLDER_ID –¥–æ–±–∞–≤–ª–µ–Ω –≤ Render ‚úÖ
- [ ] GOOGLE_CREDENTIALS –¥–æ–±–∞–≤–ª–µ–Ω –≤ Render ‚úÖ

–ï—Å–ª–∏ –≤—Å—ë ‚úÖ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–æ–¥–∞!

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied" –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Service Account email –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø—Ä–∞–≤–∞ –ø–∞–ø–∫–∏
2. –ü—Ä–∞–≤–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "Editor", –Ω–µ "Viewer"

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid credentials"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ JSON —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤/–ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫
3. –ü–æ–ø—Ä–æ–±—É–π base64 —Å–ø–æ—Å–æ–±

### –ü—Ä–æ–±–ª–µ–º–∞: Render –Ω–µ –≤–∏–¥–∏—Ç credentials

**–†–µ—à–µ–Ω–∏–µ:**
1. **Save Changes** –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
2. –ü–æ–¥–æ–∂–¥–∏ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "Google Drive connected"

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

**Google Drive API:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: –¥–æ 1 –º–ª—Ä–¥ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å
- ‚úÖ –ù–∞—à –±–æ—Ç: ~100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å (–Ω–∏—á—Ç–æ–∂–Ω–æ –º–∞–ª–æ)

**Google Cloud:**
- ‚úÖ Service Account: –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- ‚úÖ Google Drive storage: 15 GB –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- ‚úÖ –ù–∞—à–∏ —Ñ–∞–π–ª—ã: ~5 MB (–Ω–∏—á–µ–≥–æ)

**–ò—Ç–æ–≥–æ:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ! üéâ

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
- JSON –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Render Environment Variables
- –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ Git
- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —É Service Account (–Ω–µ —É –≤—Å–µ—Ö)

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- –ù–µ —Ö—Ä–∞–Ω–∏ JSON –≤ –∫–æ–¥–µ
- –ù–µ –∫–æ–º–º–∏—Ç—å –≤ GitHub
- –ù–µ –¥–∞–≤–∞–π –ø—Ä–∞–≤–∞ "Anyone with link"

---

**–ì–æ—Ç–æ–≤–æ?** –ü–µ—Ä–µ—Ö–æ–¥–∏ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–æ–¥–∞! ‚Üí
