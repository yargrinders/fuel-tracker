# üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –±—ç–∫–∞–ø–æ–≤

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ index.js

### –í —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ (–ø–æ—Å–ª–µ require):

```javascript
// –î–û–ë–ê–í–ò–¢–¨ –ø–æ—Å–ª–µ –≤—Å–µ—Ö require:
const backupSystem = require('./backup-commands');

// –î–û–ë–ê–í–ò–¢–¨ –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞:
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ –±—ç–∫–∞–ø–∞
backupSystem.registerBackupCommands(bot);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
backupSystem.autoRestoreOnStart();

// –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–±—ç–∫–∞–ø–∞ (–∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞)
backupSystem.startAutoBackup();
```

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

```javascript
require('dotenv').config();
const TelegramBot = require('node-telegram-bot-api');
const axios = require('axios');
const cheerio = require('cheerio');
const fs = require('fs').promises;
const path = require('path');

// ‚¨áÔ∏è –î–û–ë–ê–í–ò–¢–¨ –≠–¢–£ –°–¢–†–û–ö–£
const backupSystem = require('./backup-commands');

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ timezone –¥–ª—è –ì–µ—Ä–º–∞–Ω–∏–∏
process.env.TZ = 'Europe/Berlin';

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
const bot = new TelegramBot(process.env.TELEGRAM_TOKEN, { polling: true });

// ‚¨áÔ∏è –î–û–ë–ê–í–ò–¢–¨ –≠–¢–ò 3 –°–¢–†–û–ö–ò
backupSystem.registerBackupCommands(bot);
backupSystem.autoRestoreOnStart();
backupSystem.startAutoBackup();

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –∫–∞–∫ –±—ã–ª–æ
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Render Environment Variables

–î–æ–±–∞–≤—å –≤ Render ‚Üí Environment:

### 1. GOOGLE_CREDENTIALS
```
Key: GOOGLE_CREDENTIALS
Value: {–≤–µ—Å—å JSON –∏–∑ service account —Ñ–∞–π–ª–∞}
```

### 2. GOOGLE_DRIVE_FOLDER_ID
```
Key: GOOGLE_DRIVE_FOLDER_ID
Value: 1A2B3C4D5E6F7G8H9I0J (ID —Ç–≤–æ–µ–π –ø–∞–ø–∫–∏)
```

### 3. ADMIN_CHAT_ID (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
```
Key: ADMIN_CHAT_ID
Value: 123456789 (—Ç–≤–æ–π Telegram chat ID)
```

–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π chat ID:
1. –ù–∞–ø–∏—à–∏ @userinfobot –≤ Telegram
2. –°–∫–æ–ø–∏—Ä—É–π "Id:"
3. –í—Å—Ç–∞–≤—å –≤ Render

**–ó–∞—á–µ–º?** –¢–æ–ª—å–∫–æ —Ç—ã —Å–º–æ–∂–µ—à—å –¥–µ–ª–∞—Ç—å /backup –∏ /restore

---

## üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–í `package.json` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```json
{
  "dependencies": {
    "node-telegram-bot-api": "^0.64.0",
    "axios": "^1.6.2",
    "cheerio": "^1.0.0-rc.12",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "googleapis": "^128.0.0"  ‚Üê –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û
  }
}
```

---

## üöÄ –î–µ–ø–ª–æ–π

```bash
# 1. –î–æ–±–∞–≤—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
git add google-drive-backup.js backup-commands.js
git add package.json
git commit -m "Add Google Drive backup system"

# 2. Push
git push

# Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç googleapis
# - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞
# - –ó–∞–ø—É—Å—Ç–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
```

---

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –Ω–∞ Render:

```
‚úÖ Google Drive –ø–æ–¥–∫–ª—é—á—ë–Ω —É—Å–ø–µ—à–Ω–æ
üìÅ –ü–∞–ø–∫–∞ –¥–ª—è –±—ç–∫–∞–ø–æ–≤: 1A2B3C4D5E6F7G8H9I0J
üîÑ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –±—ç–∫–∞–ø–∞ (–∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞)
‚ö†Ô∏è database.json –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—ã—Ç–∞—é—Å—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å...
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –∫–æ–º–∞–Ω–¥—ã –≤ Telegram:

```
/backup
‚Üí üîÑ –ù–∞—á–∏–Ω–∞—é —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ...
‚Üí ‚úÖ –ë—ç–∫–∞–ø —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω!
   üìä –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 3

/backupinfo
‚Üí üìÅ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—ç–∫–∞–ø–∞—Ö –≤ Google Drive:
   üìÑ database.json
      –û–±–Ω–æ–≤–ª—ë–Ω: 04.02.2026, 15:30:45
      –†–∞–∑–º–µ—Ä: 8.31 KB

/restore
‚Üí üîÑ –ù–∞—á–∏–Ω–∞—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ...
‚Üí ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!
```

---

## üîÑ Workflow –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```
1. Telegram ‚Üí /backup
2. Git push (–¥–µ–ø–ª–æ–π –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞)
3. Render ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ ‚úÖ
```

–ë–æ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ database.json –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç!

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

```
1. Git push (–¥–µ–ø–ª–æ–π)
2. Telegram ‚Üí /restore (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```

---

## ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø

–ë–æ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –¥–µ–ª–∞–µ—Ç –±—ç–∫–∞–ø:
- ‚úÖ –ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ –ö–∞–∂–¥—ã–µ 24 —á–∞—Å–∞

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –≤ `backup-commands.js`:

```javascript
// –ö–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤:
setInterval(performBackup, 12 * 60 * 60 * 1000);

// –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤:
setInterval(performBackup, 6 * 60 * 60 * 1000);
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
- JSON credentials –≤ Render Environment Variables
- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —É —Ç–≤–æ–µ–≥–æ Service Account
- ADMIN_CHAT_ID –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Git

### –ü—Ä–æ–≤–µ—Ä—å:
```bash
# –í Git –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
git log --all --full-history --source -- "*credentials*"
git log --all --full-history --source -- "*service-account*"

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ!
```

---

## üìä –ß—Ç–æ –±—ç–∫–∞–ø–∏—Ç—Å—è

```
database.json  (~2-5 MB)   - –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω (14 –¥–Ω–µ–π)
users.json     (~1-5 KB)   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
stations.json  (~1 KB)     - –°–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π
```

**–ò—Ç–æ–≥–æ:** ~5 MB –º–∞–∫—Å–∏–º—É–º

**Google Drive Free:** 15 GB ‚Üí —Ö–≤–∞—Ç–∏—Ç –Ω–∞ 3000 –±—ç–∫–∞–ø–æ–≤! üéâ

---

## ‚ùì FAQ

### Q: –ß—Ç–æ –µ—Å–ª–∏ Google Drive –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω?
A: –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏. –õ–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç –æ—à–∏–±–∫—É.

### Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–±—ç–∫–∞–ø?
A: –î–∞, –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π `backupSystem.startAutoBackup()` –≤ index.js

### Q: –ö–∞–∫ —á–∞—Å—Ç–æ –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø –≤—Ä—É—á–Ω—É—é?
A: –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º: `/backup` ‚Üí git push

### Q: –ß—Ç–æ –µ—Å–ª–∏ –∑–∞–±—ã–ª —Å–¥–µ–ª–∞—Ç—å /backup?
A: –ê–≤—Ç–æ–±—ç–∫–∞–ø —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### Q: –ú–æ–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é?
A: –î–∞! –ó–∞–π–¥–∏ –≤ Google Drive ‚Üí –ø–∞–ø–∫–∞ ‚Üí Version History ‚Üí –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ –Ω—É–∂–Ω—É—é

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è:
- ‚úÖ –ê–≤—Ç–æ–±—ç–∫–∞–ø –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
- ‚úÖ –†—É—á–Ω–æ–π –±—ç–∫–∞–ø: /backup
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: /restore
- ‚úÖ –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Google Drive
- ‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–∞ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö!

**–ù–∏–∫–æ–≥–¥–∞ –±–æ–ª—å—à–µ –Ω–µ –ø–æ—Ç–µ—Ä—è–µ—à—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É! üöÄ**
