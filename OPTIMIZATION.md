# üóÑÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞: –†–∞–∑–º–µ—Ä database.json —Ä–∞—Å—Ç—ë—Ç

### üìä –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞:

```
–ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
–ü—Ä–æ–≤–µ—Ä–æ–∫ –≤ –¥–µ–Ω—å: 12 √ó 24 = 288
–ü—Ä–æ–≤–µ—Ä–æ–∫ –≤ –º–µ—Å—è—Ü: 288 √ó 30 = 8,640

–†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏: ~200 –±–∞–π—Ç
3 —Å—Ç–∞–Ω—Ü–∏–∏ √ó 8,640 –∑–∞–ø–∏—Å–µ–π √ó 200 –±–∞–π—Ç = 5.2 MB/–º–µ—Å—è—Ü

–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞: ~15 MB
–ß–µ—Ä–µ–∑ –≥–æ–¥: ~60 MB
```

**Render Free Tier:** 512 MB RAM ‚Üí –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–æ ~250 MB —Ñ–∞–π–ª–∞

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

### 1Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ (14 –¥–Ω–µ–π)

–í –∫–æ–¥–µ —É–∂–µ –µ—Å—Ç—å –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞:

```javascript
// –•—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 14 –¥–Ω–µ–π
const TWO_WEEKS_IN_MS = 14 * 24 * 60 * 60 * 1000;
const cutoffDate = new Date(Date.now() - TWO_WEEKS_IN_MS);

database[station.url] = database[station.url].filter(entry => {
  return new Date(entry.timestamp) > cutoffDate;
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–∞–∫—Å–∏–º—É–º: 14 –¥–Ω–µ–π √ó 288 = 4,032 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç–∞–Ω—Ü–∏—é
- 3 —Å—Ç–∞–Ω—Ü–∏–∏ √ó 4,032 = 12,096 –∑–∞–ø–∏—Å–µ–π
- –†–∞–∑–º–µ—Ä: ~2.4 MB (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π!)

---

### 2Ô∏è‚É£ –ö–æ–º–∞–Ω–¥–∞ /stats

–ü—Ä–æ–≤–µ—Ä—è–π —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã:

```
/stats

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: 12,096
–ü–µ—Ä–∏–æ–¥ –¥–∞–Ω–Ω—ã—Ö: 14 –¥–Ω–µ–π
–†–∞–∑–º–µ—Ä –ë–î: 2,431.45 KB

üßπ –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 14 –¥–Ω–µ–π
üíæ Render Free Tier: 512 MB RAM
```

---

## üéõÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

### –•–æ—á–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 7 –¥–Ω–µ–π (–º–µ–Ω—å—à–µ)?

–í `index.js` –Ω–∞–π–¥–∏:

```javascript
const TWO_WEEKS_IN_MS = 14 * 24 * 60 * 60 * 1000;
```

–ó–∞–º–µ–Ω–∏ –Ω–∞:

```javascript
const ONE_WEEK_IN_MS = 7 * 24 * 60 * 60 * 1000;
const cutoffDate = new Date(Date.now() - ONE_WEEK_IN_MS);
```

**–†–∞–∑–º–µ—Ä:** 7 –¥–Ω–µ–π = ~1.2 MB

---

### –•–æ—á–µ—à—å —Ö—Ä–∞–Ω–∏—Ç—å 30 –¥–Ω–µ–π (–±–æ–ª—å—à–µ)?

```javascript
const ONE_MONTH_IN_MS = 30 * 24 * 60 * 60 * 1000;
const cutoffDate = new Date(Date.now() - ONE_MONTH_IN_MS);
```

**–†–∞–∑–º–µ—Ä:** 30 –¥–Ω–µ–π = ~5.2 MB

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–¥–µ–∏:

### –ò–¥–µ—è 1: –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–í–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π, –∞–≥—Ä–µ–≥–∏—Ä—É–π –∏—Ö:

```javascript
// –•—Ä–∞–Ω–∏–º:
// - –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π: –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (–¥–µ—Ç–∞–ª—å–Ω–æ)
// - 7-30 –¥–Ω–µ–π: —Å—Ä–µ–¥–Ω–∏–µ –ø–æ —á–∞—Å–∞–º (—Å–∂–∞—Ç–æ)
// - 30+ –¥–Ω–µ–π: —Å—Ä–µ–¥–Ω–∏–µ –ø–æ –¥–Ω—è–º (–∞—Ä—Ö–∏–≤)

{
  "detailed": [ /* –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π */ ],
  "hourly": [ /* 7-30 –¥–Ω–µ–π, –ø–æ —á–∞—Å–∞–º */ ],
  "daily": [ /* 30+ –¥–Ω–µ–π, —Å—Ä–µ–¥–Ω–∏–µ –ø–æ –¥–Ω—è–º */ ]
}
```

**–≠–∫–æ–Ω–æ–º–∏—è:** –î–æ 90% –º–µ—Å—Ç–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏

---

### –ò–¥–µ—è 2: –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ –º–µ—Å—è—Ü–∞–º

```javascript
// –í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ database.json:
database-2026-02.json  // –§–µ–≤—Ä–∞–ª—å 2026
database-2026-03.json  // –ú–∞—Ä—Ç 2026
database-current.json  // –¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü (–∞–∫—Ç–∏–≤–Ω—ã–π)

// –ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª
// –°—Ç–∞—Ä—ã–µ –º–æ–∂–Ω–æ —Å–∫–∞—á–∏–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞
```

**–ü–ª—é—Å:** –õ—ë–≥–∫–∏–π –±—ç–∫–∞–ø –ø–æ –º–µ—Å—è—Ü–∞–º

---

### –ò–¥–µ—è 3: PostgreSQL –≤–º–µ—Å—Ç–æ JSON

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∞–ª—å–Ω—É—é –ë–î:

```javascript
// Render.com –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç PostgreSQL Free Tier (1GB)
// –ì–æ—Ä–∞–∑–¥–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ —á–µ–º JSON –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤

// –ü—Ä–∏–º–µ—Ä:
CREATE TABLE prices (
  id SERIAL PRIMARY KEY,
  station_url VARCHAR(255),
  diesel DECIMAL(5,3),
  e5 DECIMAL(5,3),
  e10 DECIMAL(5,3),
  timestamp TIMESTAMP
);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä–æ–µ:
DELETE FROM prices WHERE timestamp < NOW() - INTERVAL '14 days';
```

**–ü–ª—é—Å—ã:**
- –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –ê–≤—Ç–æ–∏–Ω–¥–µ–∫—Å—ã

---

### –ò–¥–µ—è 4: –¢–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã

–í–º–µ—Å—Ç–æ –∑–∞–ø–∏—Å–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç, –∑–∞–ø–∏—Å—ã–≤–∞–π —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ –º–µ–Ω—è–µ—Ç—Å—è:

```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ü–µ–Ω—É –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
// –ù–û —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å

if (current.prices.diesel !== lastEntry.prices.diesel) {
  database[station.url].unshift(current);
}
```

**–≠–∫–æ–Ω–æ–º–∏—è:** 50-70% (—Ü–µ–Ω—ã –º–µ–Ω—è—é—Ç—Å—è –Ω–µ —Ç–∞–∫ —á–∞—Å—Ç–æ!)

---

## üéØ –ú–æ—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

### –î–ª—è —Ç–≤–æ–µ–≥–æ –∫–µ–π—Å–∞ (3 —Å—Ç–∞–Ω—Ü–∏–∏):

**–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (14 –¥–Ω–µ–π)** - –∏–¥–µ–∞–ª—å–Ω–æ! ‚úÖ

**–ü–æ—á–µ–º—É:**
- –†–∞–∑–º–µ—Ä: 2-3 MB (–Ω–∏—á—Ç–æ–∂–Ω–æ –º–∞–ª–æ)
- –ò—Å—Ç–æ—Ä–∏—è: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–µ–¥–µ–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –ë–µ–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π —Å PostgreSQL

### –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—à—å 10+ —Å—Ç–∞–Ω—Ü–∏–π:

**–ö–æ–º–±–∏–Ω–∞—Ü–∏—è:**
1. 7 –¥–Ω–µ–π –¥–µ—Ç–∞–ª—å–Ω–æ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω)
2. –ó–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã
3. –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ —á–∞—Å–∞–º

**–†–∞–∑–º–µ—Ä:** –¥–æ 10 MB –¥–∞–∂–µ —Å 20 —Å—Ç–∞–Ω—Ü–∏—è–º–∏

---

## üìù Checklist –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

- ‚úÖ –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ 14 –¥–Ω–µ–π (—É–∂–µ –µ—Å—Ç—å)
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ /stats –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è
- ‚ö†Ô∏è –ï—Å–ª–∏ –±–∞–∑–∞ > 10 MB ‚Üí —Å–æ–∫—Ä–∞—Ç–∏ –¥–æ 7 –¥–Ω–µ–π
- ‚ö†Ô∏è –ï—Å–ª–∏ > 20 —Å—Ç–∞–Ω—Ü–∏–π ‚Üí –∑–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- ‚ö†Ô∏è –ï—Å–ª–∏ –±–∞–∑–∞ > 50 MB ‚Üí PostgreSQL

---

## üîß –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

–ò—Å–ø–æ–ª—å–∑—É–π `/stats` —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é:

```
–ù–µ–¥–µ–ª—è 1: 1,008 –∑–∞–ø–∏—Å–µ–π, 201 KB
–ù–µ–¥–µ–ª—è 2: 2,016 –∑–∞–ø–∏—Å–µ–π, 403 KB
–ù–µ–¥–µ–ª—è 3: 4,032 –∑–∞–ø–∏—Å–µ–π, 806 KB (—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è)
–ù–µ–¥–µ–ª—è 4: 4,032 –∑–∞–ø–∏—Å–µ–π, 806 KB ‚úÖ
```

–ö–æ–≥–¥–∞ –±–∞–∑–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ ~2-3 MB ‚Äî –≤—Å—ë OK!
